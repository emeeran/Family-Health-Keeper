# WhatsApp Sharing Feature

This feature allows you to easily share patient medical information with doctors and healthcare providers through WhatsApp, making medical consultations more efficient and comprehensive.

## 🌟 Features

### 1. **Quick Share Options**
- **Quick Summary**: Instantly share essential patient information with any doctor
- **Current Visit Only**: Share details of today's medical visit specifically
- **Customizable Content**: Choose exactly what information to include

### 2. **Comprehensive Patient Summary**
When sharing, you can include:
- 👤 **Patient Details**: Name, age, gender, contact information
- 🏥 **Medical History**: Comprehensive medical background
- 💊 **Current Medications**: All ongoing medications with dosage and frequency
- ⚠️ **Allergies**: Known allergies and adverse reactions
- 🗓️ **Recent Visits**: Last few medical appointments with details
- 🚨 **Emergency Contact**: Emergency contact person information

### 3. **Doctor-Specific Sharing**
- Select from your list of doctors
- Automatically personalize the message with doctor's name
- Share directly to doctor's WhatsApp if phone number is available

### 4. **Individual Record Sharing**
- Share specific medical visit details
- Perfect for follow-up consultations
- Includes relevant context like current medications and allergies

## 🚀 How to Use

### Method 1: Patient-Level Sharing
1. **Select a patient** from the sidebar
2. Click the **Share button** (green share icon) next to the patient's name
3. Choose from the dropdown:
   - **Quick Summary**: For immediate sharing with any healthcare provider
   - **Share with Specific Doctor**: Select a doctor from your list
   - **Current Visit Only**: Share just today's visit

### Method 2: Individual Record Sharing
1. **Select a patient** and navigate to their records
2. **Hover over any medical record** in the sidebar
3. Click the **Share button** (green share icon) that appears
4. The record will be formatted and shared via WhatsApp

### Method 3: Customized Sharing
1. Click the **Share button** next to patient's name
2. **Select a specific doctor** from the dropdown
3. **Customize the content**:
   - ✅ Include Full Medical History
   - ✅ Include Current Medications
   - ✅ Include Allergies
   - ✅ Include Recent Visits (select number: 1-5 visits)
   - 💬 Add Custom Message (optional)
4. Click **Share via WhatsApp** or **Share Summary**

## 📱 What Gets Shared

### Sample Output Format:
```
👨‍⚕️ Dear Dr. [Doctor's Name]

📋 MEDICAL INFORMATION SUMMARY

👤 Patient Details
Name: [Patient Name]
Age: [Age] years
Gender: [Gender]
Phone: [Contact Number]

🏥 Medical History
[Patient's medical history text]

💊 Current Medications
• [Medication 1] - [Dosage] ([Frequency])
• [Medication 2] - [Dosage] ([Frequency])

⚠️ Allergies
• [Allergy 1]
• [Allergy 2]

🗓️ Recent Medical Visits (Last 3)

📅 [Date]
🩺 Diagnosis: [Diagnosis text]
💭 Complaint: [Complaint text]
📝 Prescription: [Prescription text]

🚨 Emergency Contact
Name: [Emergency Contact Name]
Phone: [Emergency Contact Phone]
Relationship: [Relationship]

💬 Additional Information
[Custom message if provided]

📱 Shared via Family Health Keeper
🕒 [Current Date & Time]
⚠️ This information is for medical consultation purposes only.
```

## 🛡️ Privacy & Security

- **Your data stays private**: No medical information is stored on external servers
- **Local processing**: All message formatting happens on your device
- **WhatsApp encryption**: Uses WhatsApp's end-to-end encryption
- **No third-party services**: Direct connection to WhatsApp Web/Mobile
- **Informed consent**: You control exactly what information is shared

## 💡 Use Cases

### 1. **Emergency Situations**
- Quickly share essential medical information during emergencies
- Include allergies, current medications, and emergency contacts

### 2. **New Doctor Consultations**
- Provide comprehensive medical history to new healthcare providers
- Save time filling out medical history forms

### 3. **Second Opinions**
- Share complete medical records for specialist consultations
- Include relevant test results and diagnoses

### 4. **Follow-up Visits**
- Share specific visit details for follow-up appointments
- Reference previous diagnoses and treatments

### 5. **Medication Reviews**
- Share current medication list with pharmacists
- Include allergies for medication safety checks

## 🎯 Tips for Effective Sharing

### Before Sharing:
1. **Review the information** to ensure accuracy
2. **Customize the content** based on the consultation purpose
3. **Add relevant context** in the custom message field
4. **Remove sensitive information** not needed for the consultation

### Best Practices:
- 📝 **Be specific**: Include relevant symptoms or concerns in custom messages
- 🔢 **Limit recent visits**: Choose appropriate number of past visits (usually 2-3)
- 💊 **Medication focus**: Emphasize current medications when discussing new prescriptions
- ⚠️ **Allergies first**: Always include allergies when sharing medication information

## 🔧 Technical Details

### Automatic Detection:
- **Mobile users**: Automatically opens WhatsApp mobile app
- **Desktop users**: Opens WhatsApp Web in browser
- **Cross-platform**: Works on all devices with WhatsApp access

### Message Formatting:
- **Character limits**: Optimized for WhatsApp's character limits
- **Text truncation**: Long text is automatically truncated with "..."
- **Special characters**: Uses Unicode emojis for better readability
- **Structured format**: Clear sections with headers and bullet points

## 🆘 Troubleshooting

### Common Issues:

1. **WhatsApp not opening**
   - Check internet connection
   - Ensure WhatsApp is installed on mobile devices
   - Try refreshing the page and trying again

2. **Message not formatting correctly**
   - Check that patient data is complete
   - Ensure patient has at least basic information filled
   - Try sharing with different content options

3. **Doctor not receiving message**
   - Verify doctor's phone number is correct in the system
   - Check that the doctor has WhatsApp enabled
   - Try sharing summary instead of direct message

## 📞 Support

If you encounter issues with the WhatsApp sharing feature:
1. Check your internet connection
2. Ensure WhatsApp is properly set up on your device
3. Verify patient and doctor information is complete
4. Try alternative sharing options (Quick Summary vs. Doctor-specific)

---

*This feature is designed to facilitate better communication with healthcare providers. Always verify that shared information is accurate and relevant to your medical consultation.*